import{k as b,n as f,p as h,q as _,c as l,a as t,d as c,t as o,F as p,r as y,l as v,o as n}from"./DiblFvHu.js";const w={class:"space-y-6 mt-12"},k={key:0,class:"space-y-6"},C={class:"flex justify-between items-center"},A={id:"invoice",class:"card p-8 bg-white"},F={class:"border-b border-gray-200 pb-6 mb-6"},T={class:"flex justify-between items-start"},D={class:"text-right"},I={class:"text-gray-600 mt-1"},N={class:"text-sm text-gray-500 mt-2"},S={class:"mb-6"},O={class:"text-gray-700"},R={class:"mb-6"},B={class:"w-full"},E={class:"py-3 text-gray-900"},j={class:"py-3 text-center text-gray-700"},L={class:"py-3 text-right text-gray-700"},$={class:"py-3 text-right font-semibold text-gray-900"},q={class:"flex justify-end"},M={class:"w-64"},V={class:"flex justify-between py-2 border-t border-gray-200"},W={class:"text-xl font-bold text-green-600"},z={class:"mt-8 pt-6 border-t border-gray-200 text-center text-sm text-gray-500"},P={class:"mt-1"},G={key:1,class:"card"},H={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},U={class:"bg-white divide-y divide-gray-200"},X={class:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"},Y={class:"px-6 py-4 whitespace-nowrap text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap text-gray-600"},K={class:"px-6 py-4 whitespace-nowrap font-semibold text-green-600"},Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},tt=["onClick"],rt={__name:"factures",setup(et){const u=_(),x=b(),r=f(null),i=a=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(a),d=a=>new Date(a).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),m=a=>{r.value=a},g=()=>{const a=document.getElementById("invoice").innerHTML,e=window.open("","_blank");e.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Facture #${r.value.id.slice(-6)}</title>
      <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        .font-bold { font-weight: bold; }
      </style>
    </head>
    <body>
      ${a}
    </body>
    </html>
  `),e.document.close(),e.print()};return h(()=>{const a=u.query.order;if(a){const e=x.getOrderById(a);e&&(r.value=e)}}),(a,e)=>(n(),l("div",w,[e[9]||(e[9]=t("div",{class:"mb-8"},[t("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"Factures"),t("p",{class:"text-gray-600"},"Consultez et imprimez les factures")],-1)),r.value?(n(),l("div",k,[t("div",C,[t("button",{onClick:e[0]||(e[0]=s=>r.value=null),class:"btn-secondary"}," ← Retour à la liste "),t("button",{onClick:g,class:"btn-primary"}," 🖨️ Imprimer ")]),t("div",A,[t("div",F,[t("div",T,[e[2]||(e[2]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"🍽️ Web Stock App"),t("p",{class:"text-gray-600 mt-1"},"Restaurant & Gestion"),t("p",{class:"text-sm text-gray-500 mt-2"},[c(" Dakar, Sénégal"),t("br"),c(" Tél: +221 77 777 777"),t("br"),c(" Email: contact@web-stock-app.sn ")])],-1)),t("div",D,[e[1]||(e[1]=t("h2",{class:"text-xl font-bold text-gray-900"},"FACTURE",-1)),t("p",I,"N° "+o(r.value.id.slice(-6)),1),t("p",N," Date: "+o(d(r.value.createdAt)),1)])])]),t("div",S,[e[3]||(e[3]=t("h3",{class:"font-semibold text-gray-900 mb-2"},"Facturé à:",-1)),t("p",O,o(r.value.customerName),1)]),t("div",R,[t("table",B,[e[4]||(e[4]=t("thead",null,[t("tr",{class:"border-b border-gray-200"},[t("th",{class:"text-left py-3 font-semibold text-gray-900"},"Article"),t("th",{class:"text-center py-3 font-semibold text-gray-900"},"Qté"),t("th",{class:"text-right py-3 font-semibold text-gray-900"},"Prix unitaire"),t("th",{class:"text-right py-3 font-semibold text-gray-900"},"Total")])],-1)),t("tbody",null,[(n(!0),l(p,null,y(r.value.items,s=>(n(),l("tr",{key:s.productId,class:"border-b border-gray-100"},[t("td",E,o(s.productName),1),t("td",j,o(s.quantity),1),t("td",L,o(i(s.price)),1),t("td",$,o(i(s.subtotal)),1)]))),128))])])]),t("div",q,[t("div",M,[t("div",V,[e[5]||(e[5]=t("span",{class:"text-xl font-bold text-gray-900"},"TOTAL:",-1)),t("span",W,o(i(r.value.total)),1)])])]),t("div",z,[e[6]||(e[6]=t("p",null,"Merci de votre visite !",-1)),t("p",P,"Web Stock App - "+o(d(r.value.createdAt)),1)])])])):(n(),l("div",G,[e[8]||(e[8]=t("div",{class:"p-6 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Sélectionner une commande")],-1)),t("div",H,[t("table",Q,[e[7]||(e[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," N° Commande "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Client "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",U,[(n(!0),l(p,null,y(v(x).orders.slice().reverse(),s=>(n(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",X," #"+o(s.id.slice(-6)),1),t("td",Y,o(s.customerName),1),t("td",J,o(d(s.createdAt)),1),t("td",K,o(i(s.total)),1),t("td",Z,[t("button",{onClick:st=>m(s),class:"text-blue-600 hover:text-blue-900"}," 📄 Voir facture ",8,tt)])]))),128))])])])]))]))}};export{rt as default};
