import{j as y,k as f,m as p,c as l,a as t,t as o,l as n,F as m,r as _,o as a}from"./DiblFvHu.js";const b={class:"space-y-6 mt-12"},h={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},k={class:"card p-6"},S={class:"flex items-center justify-between"},j={class:"text-2xl font-bold text-green-600"},w={class:"card p-6"},D={class:"flex items-center justify-between"},N={class:"text-2xl font-bold text-blue-600"},R={class:"card p-6"},T={class:"flex items-center justify-between"},A={class:"text-2xl font-bold text-purple-600"},P={class:"card p-6"},C={class:"flex items-center justify-between"},F={class:"text-2xl font-bold text-orange-600"},O={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Q={class:"card"},B={class:"p-6"},E={key:0,class:"text-center text-gray-500 py-8"},L={key:1,class:"space-y-4"},q={class:"flex items-center space-x-3"},V={class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-semibold text-sm"},z={class:"font-medium text-gray-900"},I={class:"text-sm text-gray-600"},M={class:"text-right"},U={class:"font-semibold text-green-600"},X={class:"card"},G={class:"p-6"},H={key:0,class:"text-center text-gray-500 py-8"},J={key:1,class:"space-y-3"},K={class:"font-medium text-gray-900"},W={class:"text-sm text-gray-600"},Y={class:"text-right"},Z={class:"font-semibold text-green-600"},$={class:"card"},tt={class:"p-6"},et={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},st={class:"text-center"},ot={class:"text-3xl font-bold text-blue-600"},rt={class:"text-center"},dt={class:"text-3xl font-bold text-green-600"},lt={class:"text-center"},nt={class:"text-3xl font-bold text-red-600"},ct={__name:"stats",setup(at){const u=y(),i=f(),c=r=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(r),x=p(()=>{const r={};return i.orders.forEach(e=>{e.items.forEach(s=>{r[s.productName]||(r[s.productName]={productName:s.productName,totalQuantity:0,totalRevenue:0}),r[s.productName].totalQuantity+=s.quantity,r[s.productName].totalRevenue+=s.subtotal})}),Object.values(r).sort((e,s)=>s.totalQuantity-e.totalQuantity)}),g=p(()=>{const r={},e=[];for(let s=6;s>=0;s--){const d=new Date;d.setDate(d.getDate()-s);const v=d.toDateString();e.push({date:d.toLocaleDateString("fr-FR",{weekday:"short",day:"2-digit",month:"2-digit"}),dateString:v,revenue:0,orderCount:0}),r[v]=e[e.length-1]}return i.orders.forEach(s=>{const d=new Date(s.createdAt).toDateString();r[d]&&(r[d].revenue+=s.total,r[d].orderCount++)}),e});return(r,e)=>(a(),l("div",b,[e[14]||(e[14]=t("div",{class:"mb-8"},[t("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"Statistiques"),t("p",{class:"text-gray-600"},"Analysez les performances de votre restaurant")],-1)),t("div",h,[t("div",k,[t("div",S,[t("div",null,[e[0]||(e[0]=t("p",{class:"text-sm font-medium text-gray-600"},"Revenus Aujourd'hui",-1)),t("p",j,o(c(n(i).getDailyRevenue)),1)]),e[1]||(e[1]=t("div",{class:"text-3xl"},"üí∞",-1))])]),t("div",w,[t("div",D,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm font-medium text-gray-600"},"Revenus Total",-1)),t("p",N,o(c(n(i).getTotalRevenue)),1)]),e[3]||(e[3]=t("div",{class:"text-3xl"},"üìä",-1))])]),t("div",R,[t("div",T,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-600"},"Commandes Total",-1)),t("p",A,o(n(i).getTotalOrders),1)]),e[5]||(e[5]=t("div",{class:"text-3xl"},"üõí",-1))])]),t("div",P,[t("div",C,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Panier Moyen",-1)),t("p",F,o(n(i).getTotalOrders>0?c(n(i).getTotalRevenue/n(i).getTotalOrders):c(0)),1)]),e[7]||(e[7]=t("div",{class:"text-3xl"},"üß∫",-1))])])]),t("div",O,[t("div",Q,[e[8]||(e[8]=t("div",{class:"p-6 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Produits les plus vendus")],-1)),t("div",B,[x.value.length===0?(a(),l("div",E," Aucune vente enregistr√©e ")):(a(),l("div",L,[(a(!0),l(m,null,_(x.value.slice(0,10),(s,d)=>(a(),l("div",{key:s.productName,class:"flex items-center justify-between"},[t("div",q,[t("div",V,o(d+1),1),t("div",null,[t("p",z,o(s.productName),1),t("p",I,o(s.totalQuantity)+" vendus",1)])]),t("div",M,[t("p",U,o(c(s.totalRevenue)),1)])]))),128))]))])]),t("div",X,[e[9]||(e[9]=t("div",{class:"p-6 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Ventes par jour (7 derniers jours)")],-1)),t("div",G,[g.value.length===0?(a(),l("div",H," Aucune vente enregistr√©e ")):(a(),l("div",J,[(a(!0),l(m,null,_(g.value,s=>(a(),l("div",{key:s.date,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",null,[t("p",K,o(s.date),1),t("p",W,o(s.orderCount)+" commande"+o(s.orderCount>1?"s":""),1)]),t("div",Y,[t("p",Z,o(c(s.revenue)),1)])]))),128))]))])])]),t("div",$,[e[13]||(e[13]=t("div",{class:"p-6 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Analyse du stock")],-1)),t("div",tt,[t("div",et,[t("div",st,[t("div",ot,o(n(u).getTotalProducts),1),e[10]||(e[10]=t("p",{class:"text-sm text-gray-600 mt-1"},"Produits diff√©rents",-1))]),t("div",rt,[t("div",dt,o(n(u).getTotalStock),1),e[11]||(e[11]=t("p",{class:"text-sm text-gray-600 mt-1"},"Unit√©s en stock",-1))]),t("div",lt,[t("div",nt,o(n(u).getLowStockProducts.length),1),e[12]||(e[12]=t("p",{class:"text-sm text-gray-600 mt-1"},"Alertes stock faible",-1))])])])])]))}};export{ct as default};
